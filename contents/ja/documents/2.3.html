<h1>Ebitengine 2.3 リリースノート</h1>
<p><em>2022 年 5 月 25 日、 Ebiten は Ebitengine に改称されました。</em></p>
<h2>v2.3.0</h2>
<p><a href="https://github.com/hajimehoshi/ebiten/milestone/63?closed=1">Issues for v2.3.0</a></p>
<h3>Windows での DirectX サポート</h3>
<p>(<a href="https://github.com/hajimehoshi/ebiten/issues/1007">#1007</a>)</p>
<p>Windows で DirectX がサポートされました。 Arm Windows など、 Ebitengine がサポートする環境を増やすための準備です。</p>
<h3>Nintendo Switch™ 向けのネイティブコンパイル</h3>
<p>(<a href="https://github.com/hajimehoshi/ebiten/issues/1900">#1900</a>)</p>
<p>前のバージョンでは、 <a href="https://github.com/hajimehoshi/go2cpp"><code>go2cpp</code></a> を使って、 Go プログラムを WebAssembly フォーマット経由で C++ に変換することで、 Ebitengine は Nintendo Switch をサポートしていました。これはポータブルで単純なソリューションでした。しかし、シングルスレッド故にパフォーマンスが悪く、また大量の C++ ファイルをコンパイルするため時間がかかるなどの問題がありました。</p>
<p>この問題を解決するため、 Go ランタイムのシステムコール呼び出しを C 関数呼び出しに置き換える <a href="https://github.com/hajimehoshi/hitsumabushi">Hitsumabushi</a> を使って Nintendo Switch へのネイティブコンパイルをサポートします。技術的詳細については、 <a href="https://zenn.dev/hajimehoshi/articles/72f027db464280">Hitsumabushi に関するブログ記事</a>を参照してください。</p>
<p>これをサポートするために、 Ebitengine は新しいビルドタグ <code>ebitencbackend</code> を導入しました。</p>
<h3>環境変数 <code>EBITEN_GRAPHICS_LIBRARY</code></h3>
<p>環境変数 <code>EBITEN_GRAPHICS_LIBRARY</code> で Ebitengine が内部で使うグラフィックライブラリを指定することができます。</p>
<ul>
  <li><code>auto</code> (デフォルト): Ebitengine が自動的にグラフィックライブラリを選びます。</li>
  <li><code>opengl</code>: OpenGL、 OpenGL ES または WebGL が使われます。</li>
  <li><code>metal</code>: Metal が使われます。</li>
  <li><code>directx</code>: DirectX が使われます。</li>
</ul>
<p>ビルドタグ <code>ebitengl</code> は削除されました。</p>
<h3>ビルドタグ <code>ebitenexternaldll</code></h3>
<p>(<a href="https://github.com/hajimehoshi/ebiten/issues/1832">#1832</a>)</p>
<p>Ebitengine は Windows 実行ファイルに DLL ファイルを埋め込み、実行ファイルがそれを必要時に展開します。しかし、この手法には問題があり、一部のウィルス検知ソフトがアプリケーションをウィルスと誤検知してしまうことがありました。</p>
<p>新しいビルドタグ <code>ebitenexternaldll</code> によって、 DLL 埋め込みをしないようにできます。実行ファイルは DLL ファイルがワーキングディレクトリに必要になります。 Ebitengine リポジトリの <code>internal/glfw</code> から次の DLL ファイルをコピーしてください:</p>
<ul>
  <li><code>glfw_windows_386.dll</code> (Windows GOARCH=386 向け)</li>
  <li><code>glfw_windows_amd64.dll</code> (Windows GOARCH=amd64 向け)</li>
</ul>
<p>これは未だに完璧な解決策ではありませんが、誤検知を低減することができるでしょう。</p>
<h3>バイブレーション</h3>
<p>(<a href="https://github.com/hajimehoshi/ebiten/issues/1452">#1452</a>)</p>
<p>モバイルデバイス、ブラウザ、ゲームコントローラを振動させるための新しい API が導入されました:</p>
<ul>
  <li><a href="https://pkg.go.dev/github.com/hajimehoshi/ebiten/v2#Vibrate"><code>ebiten.Vibrate</code></a>: 指定されたオプションでデバイスを振動させます。モバイルとブラウザで動きます。</li>
  <li><a href="https://pkg.go.dev/github.com/hajimehoshi/ebiten/v2#VibrateGamepad"><code>ebiten.VibrateGamepad</code></a> 指定されたオプションで指定されたゲームパッドを振動させます。現在のところブラウザと Nintendo Switch でのみ動きます。</li>
</ul>
<h3>ウィンドウのリサイズモード</h3>
<p>(<a href="https://github.com/hajimehoshi/ebiten/issues/1819">#1819</a>)</p>
<p>ウィンドウのリサイズモードのための新しい API が導入されました:</p>
<ul>
  <li><a href="https://pkg.go.dev/github.com/hajimehoshi/ebiten/v2#WindowResizingModeType"><code>ebiten.WindowResizingModeType</code></a>: どのようにユーザーがウィンドウをリサイズできるかのモードを表します。
    <ul>
      <li><code>WindowResizingModeDisabled</code>: ユーザーによるリサイズを不可能にします。</li>
      <li><code>WindowResizingModeOnlyFullscreenEnabled</code> ユーザーによるリサイズを不可能にしますが、フルスクリーンは許可します。今の所 macOS でのみ有効です。</li>
      <li><code>WindowResizingModeEnabled</code>: ユーザーによるリサイズを可能にします。</li>
    </ul>
  </li>
  <li><a href="https://pkg.go.dev/github.com/hajimehoshi/ebiten/v2#SetWindowResizingMode"><code>ebiten.SetWindowResizingMode</code></a>: どのようにユーザーがウィンドウをリサイズできるかのモードを設定します。</li>
</ul>
<p><code>ebiten.IsWindowResizable</code> と <code>ebiten.SetWindowResizable</code> は非推奨になりました。</p>
<h3>リアルタイム PCM</h3>
<p>(<a href="https://github.com/hajimehoshi/ebiten/issues/2026">#2026</a>)</p>
<p>オーディオプレイヤーのバッファサイズを調整して、リアルタイム PCM を実現する新しい API が導入されました:</p>
<ul>
  <li><a href="https://pkg.go.dev/github.com/hajimehoshi/ebiten/v2/audio#Player.SetBufferSize"><code>(*audio.Player).SetBufferSize</code></a> はプレイヤーのバッファサイズを調整します。小さいバッファサイズは、例えばリアルタイム PCM を再生したいときに便利です。</li>
</ul>
<p>実例は新しいサンプル <code>realtimepcm</code> を参照してください。</p>
<h3>その他の新しい機能</h3>
<ul>
  <li>iOS のゲームパッドサポート (<a href="https://github.com/hajimehoshi/ebiten/issues/1105">#1105</a>)</li>
  <li>モバイルでの標準ゲームパッドレイアウト (<a href="https://github.com/hajimehoshi/ebiten/issues/1722">#1722</a>)</li>
  <li><a href="https://pkg.go.dev/github.com/hajimehoshi/ebiten/v2#SetScreenFilterEnabled"><code>ebiten.SetScreenFilterEnabled</code></a> (<a href="https://github.com/hajimehoshi/ebiten/issues/1772">#1772</a>)</li>
  <li><a href="https://pkg.go.dev/github.com/hajimehoshi/ebiten/v2/text#AppendGlyphs"><code>text.AppendGlyphs</code></a> (<a href="https://github.com/hajimehoshi/ebiten/issues/1871">#1871</a>)</li>
  <li><a href="https://pkg.go.dev/github.com/hajimehoshi/ebiten/v2#ColorM.ScaleWithColor"><code>(*ebiten.ColorM).ScaleWithColor</code></a> (<a href="https://github.com/hajimehoshi/ebiten/issues/1944">#1944</a>)</li>
</ul>
<h3>バグ修正</h3>
<p>このリリースには、 v2.2.x にあるすべてのバグ修正が含まれます。</p>
<ul>
  <li>ループするオーディオストリームの僅かなノイズを修正 (<a href="https://github.com/hajimehoshi/ebiten/issues/1888">#1888</a>)</li>
  <li><a href="/ja/documents/shader.html">Kage</a> のたくさんのバグ (間違った型チェックなど) を修正</li>
  <li>その他の細かい修正</li>
</ul>
<h3>パフォーマンス</h3>
<ul>
  <li>最初のダミーウィンドウを無くすことによる、起動スピードの改善 (<a href="https://github.com/hajimehoshi/ebiten/issues/1918">#1918</a>、 <a href="https://github.com/hajimehoshi/ebiten/issues/1982">#1982</a>).</li>
  <li>その他の細かい修正</li>
</ul>
<h2>v2.3.1</h2>
<p><a href="https://github.com/hajimehoshi/ebiten/milestone/78?closed=1">Issues for v2.3.1</a></p>
<h3>バグ修正</h3>
<ul>
  <li>ゲームの <code>Layout</code> 関数内で画像を操作するとデッドロックする問題の修正 (<a href="https://github.com/hajimehoshi/ebiten/issues/2079">#2079</a>)。</li>
  <li>Windows でウィンドウの大きさを変更するとクラッシュすることがあった問題の修正 (<a href="https://github.com/hajimehoshi/ebiten/issues/2081">#2081</a>)。</li>
</ul>
<h2>v2.3.2</h2>
<p><a href="https://github.com/hajimehoshi/ebiten/milestone/79?closed=1">Issues for v2.3.2</a></p>
<h3>バグ修正</h3>
<ul>
  <li>macOS で古い Metal シェーダー言語バージョンが使われてしまうことがあったバグを修正 (<a href="https://github.com/hajimehoshi/ebiten/issues/2086">#2086</a>)。</li>
  <li><code>Image.Fill</code> と <code>Image.Set</code> を呼んでウィンドウをリサイズすると、描画結果が壊れるバグの修正 (<a href="https://github.com/hajimehoshi/ebiten/issues/2089">#2089</a>)。</li>
</ul>
<h2>v2.3.3</h2>
<p><a href="https://github.com/hajimehoshi/ebiten/milestone/80?closed=1">Issues for v2.3.3</a></p>
<h3>バグ修正</h3>
<ul>
  <li>Android NDK 24 のサポート (<a href="https://github.com/hajimehoshi/ebiten/issues/2085">#2085</a>)。</li>
  <li><code>inpututil</code> をインポートするだけでクラッシュすることがあった問題の修正 (<a href="https://github.com/hajimehoshi/ebiten/issues/2103">#2103</a>)。</li>
</ul>
<h2>v2.3.4</h2>
<p><a href="https://github.com/hajimehoshi/ebiten/milestone/81?closed=1">Issues for v2.3.4</a></p>
<h3>バグ修正</h3>
<ul>
  <li>DirectX ドライバで、存在しない戻り値をハンドルしていた問題の修正 (<a href="https://github.com/hajimehoshi/ebiten/issues/2115">#2115</a>)。</li>
  <li>32bit Linux でゲームパッド使用時にアプリケーションがクラッシュする問題の修正 (<a href="https://github.com/hajimehoshi/ebiten/issues/2122">#2122</a>)。</li>
  <li>Windows で Alt+Enter を押すとアプリケーションがクラッシュする問題の修正 (<a href="https://github.com/hajimehoshi/ebiten/issues/2123">#2123</a>)。</li>
</ul>
<h2>v2.3.5</h2>
<p><a href="https://github.com/hajimehoshi/ebiten/milestone/83?closed=1">Issues for v2.3.5</a></p>
<h3>バグ修正</h3>
<ul>
  <li><code>MaximizeWindow</code> をメインループ前に呼ぶとクラッシュした問題の修正 (<a href="https://github.com/hajimehoshi/ebiten/issues/2137">#2137</a>)。</li>
  <li>Windows で、 <code>EvenOdd</code> モードで画面が点滅することがあった問題の修正 (<a href="https://github.com/hajimehoshi/ebiten/issues/2138">#2138</a>)。</li>
  <li>Windows で、画面リサイズ後にデバッグ警告が表示されていた問題の修正 (<a href="https://github.com/hajimehoshi/ebiten/issues/2151">#2151</a>)。</li>
  <li>macOS で、 <code>ReplacePixels</code> が失敗することがあった問題の修正 (<a href="https://github.com/hajimehoshi/ebiten/issues/2154">#2154</a>)。</li>
</ul>
<h2>v2.3.6</h2>
<p><a href="https://github.com/hajimehoshi/ebiten/milestone/84?closed=1">Issues for v2.3.6</a></p>
<h3>バグ修正</h3>
<ul>
  <li>ブラウザで時々メモリアロケーションエラーが発生していた問題の修正 (<a href="https://github.com/hajimehoshi/ebiten/issues/2156">#2156</a>)。</li>
  <li>Linux で、特定の入力デバイスをつないでいるときにアプリケーションがクラッシュすることがあった問題の修正 (<a href="https://github.com/hajimehoshi/ebiten/issues/2169">#2169</a>)。</li>
  <li>macOS で、大きい画面が点滅する事があった問題の修正 (<a href="https://github.com/hajimehoshi/ebiten/issues/2174">#2174</a>)。</li>
  <li>Windows で、ロック画面にいくときにアプリケーションがクラッシュした問題の修正 (<a href="https://github.com/hajimehoshi/ebiten/issues/2179">#2179</a>)。</li>
</ul>
<h2>v2.3.7</h2>
<p><a href="https://github.com/hajimehoshi/ebiten/milestone/85?closed=1">Issues for v2.3.7</a></p>
<h3>バグ修正</h3>
<ul>
  <li>iOS 向けの <code>ebitenmobile</code> が、大文字小文字を区別するファイルシステムで動かなかった問題の修正 (<a href="https://github.com/hajimehoshi/ebiten/issues/2192">#2192</a>)。</li>
  <li>DirectX ドライバ内でのメモリの使い方が間違っていた問題を修正 (<a href="https://github.com/hajimehoshi/ebiten/issues/2201">#2201</a>、 <a href="https://github.com/hajimehoshi/ebiten/issues/2202">#2202</a>、 <a href="https://github.com/hajimehoshi/ebiten/issues/2204">#2204</a>)。</li>
  <li>Windows でゲームパッドを抜くときにメモリリークした問題の修正 (<a href="https://github.com/hajimehoshi/ebiten/issues/2205">#2205</a>)。</li>
</ul>
<h2>v2.3.8</h2>
<p><a href="https://github.com/hajimehoshi/ebiten/milestone/86?closed=1">Issues for v2.3.8</a></p>
<h3>バグ修正</h3>
<ul>
  <li>Android でマルチタッチが動かないことがあった問題の修正 (<a href="https://github.com/hajimehoshi/ebiten/issues/2220">#2220</a>).</li>
  <li><code>vorbis.Decode</code> にシークできないソースを与えるとエラーになった問題の修正 (<a href="https://github.com/hajimehoshi/ebiten/issues/2252">#2252</a>).</li>
  <li>macOS でウィンドウのデコレーション状態を変更すると予期せずウィンドウサイズが変わってしまうことがあった問題の修正 (<a href="https://github.com/hajimehoshi/ebiten/issues/2257">#2257</a>).</li>
</ul>
